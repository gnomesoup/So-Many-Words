#:import utils kivy.utils

<SoManyWordsLayout>:
    orientation: 'vertical'
    buttonRadius: '52dp'
    canvas:
        Color:
            rgba: utils.get_color_from_hex("#64778C")
        Rectangle:
            pos: self.pos
            size: self.size
    Label:
        size_hint_y: 0.1
        id: debugLabel
        text: 'debug'
        size: 200, 24
    Label:
        id: currentWord
        text: 'Welcome'
        font_size: '100sp'
        text_size: self.size
        halign: 'center'
        # canvas.before:
        #     Color:
        #         rgba: [1,0,0,1]
        #     Rectangle:
        #         pos: self.pos
        #         size: self.size

    RelativeLayout:
        id: wordStreamLayout
        size_hint: 1, 0.5
        Label: 
            id: wordStreamCurrent
            size_hint: None, None
            pos_hint: {'center_x': 0.5, 'top': 1}
            font_size: '36sp'
            text: " so "
            offset: '10dp'
            size: self.texture_size
            color: utils.get_color_from_hex("#FC0000")
            halign: 'center'
            valign: 'top'
            multiline: False
            # canvas.before:
            #     Color:
            #         rgba: [1,0.5,0,1]
            #     Rectangle:
            #         pos: self.pos
            #         size: self.size
        StreamLabel:
            id: wordStreamBefore
            right: root.ids.wordStreamCurrent.x 
            text: "...to"
            halign: 'right'
        StreamLabel:
            id: wordStreamAfter
            x: root.ids.wordStreamCurrent.right
            text: "many words"
            halign: 'left'

    BoxLayout:
        size_hint: 1, 0.25
        orientation: 'horizontal'
        RoundButton:
            id: openButton
            text: 'open'
            radius: root.buttonRadius
            on_release: app.paste()
        RoundPlaceholder:
            radius: root.buttonRadius
        RoundPlaceholder:
            radius: root.buttonRadius
        RoundPlaceholder:
            radius: root.buttonRadius
        RoundPlaceholder:
            radius: root.buttonRadius
        RoundButton:
            id: beginningButton
            text: '|<'
            radius: root.buttonRadius
            on_release: app.wordBeginning()
        RoundButton:
            id: previousButton
            text: '<'
            radius: root.buttonRadius
            on_release: app.wordPrevious()
        RoundButton:
            id: playButton
            text: 'play'
            radius: root.buttonRadius
            color: utils.get_color_from_hex("#FC0000") if self.state=='normal' else utils.get_color_from_hex("#515f70")
            on_release: app.playPause()
        RoundButton:
            id: nextButton
            text: '>'
            radius: root.buttonRadius
            on_release: app.wordNext()
        RoundButton:
            id: endButton
            text: '>|'
            radius: root.buttonRadius
            on_release: app.wordEnd()
        RoundPlaceholder:
            radius: root.buttonRadius
        RoundButton:
            id: wpmDownButton
            text: '-'
            radius: root.buttonRadius
            on_release: app.wpmDown()
        RoundButton:
            id: wpmInput
            text: str(app.wpm)
            radius: root.buttonRadius
            color: utils.get_color_from_hex("#FC0000") if self.state=='normal' else utils.get_color_from_hex("#515f70")
            on_release: app.wpmManualInput()
        RoundButton:
            id: wpmUpButton
            text: '+'
            radius: root.buttonRadius
            on_release: app.wpmUp()
        RoundButton:
            id: helpButton
            text: '?'
            radius: root.buttonRadius

<RoundButton@Button>:
    radius: 52
    margin: self.radius * (1/16)
    # size_hint: 1, None
    # size: self.radius + self.margin, self.radius + self.margin * 2
    background_color: (0,0,0,0)
    background_normal: ''
    color: utils.get_color_from_hex("#515f70")
    font_size: '17sp'
    # bold: True
    # font_name: 'Source Code Pro'
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex("#FFFFFF") if self.state == 'normal' else utils.get_color_from_hex("#FC0000")
        Ellipse:
            pos: self.center[0]- self.radius/2,self.center[1]- self.radius/2
            size: self.radius, self.radius
            angle_start: 0
            angle_end: 360

<RoundPlaceholder@Label>
    text: ""
    radius: 42
    margin: self.radius * (1/16)
    # size_hint: None, None
    # size: self.radius + self.margin, self.radius + self.margin * 2
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex("#FFFFFF32")
        Ellipse:
            pos: self.center[0]- self.radius/2,self.center[1]- self.radius/2
            size: self.radius, self.radius
            angle_start: 0
            angle_end: 360

<StreamLabel@Label>
    size_hint: 1, 1
    color: utils.get_color_from_hex("#FFFFFFA0")
    font_size: '36sp'
    text_size: self.size
    valign: 'top'
    multiline: False
